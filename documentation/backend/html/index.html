<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tDisk userspace module: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tDisk userspace module
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">tDisk userspace module Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This documentation page contains documentation about the following components:</p><ul>
<li>tDisk backend<ul>
<li>tDisk kernel plugins</li>
<li>tDisk tests</li>
</ul>
</li>
</ul>
<h1>tDisk backend </h1>
<p>Structure:</p><ul>
<li>Direct kernel communication to kernel<ul>
<li>Using ioctl (written in C)</li>
</ul>
</li>
<li>Main backend part (written in C++)<ul>
<li>Managing tDisk</li>
<li>Reading config files</li>
<li>Device advice</li>
</ul>
</li>
<li>C-interfaces for backend</li>
</ul>
<h1>tDisk kernel plugins </h1>
<p>The tDisk kernel module is able to talk to user space plugins and treat them like a physical disk (you can read more about this in the kernel module documentation). The plugin base is responsible to communicate with the kernel module and provide those services to the actual plugins.</p>
<h2>Plugins base </h2>
<p>Provides kernel communication functions</p><ul>
<li>Registering in kernel module</li>
<li>Unregistering from kernel module</li>
<li>Polling listening and receive kernel messages</li>
<li>Parsing messages and passing them to the actual plugin. The following messages need to be performed by the actual plugin<ul>
<li><em>get size</em>: Should return the size of the plugin</li>
<li><em>read</em>: Should read the requested data and store it in the target buffer</li>
<li><em>write</em>: Should write the requested data from the buffer</li>
</ul>
</li>
</ul>
<p><b>Communication</b></p>
<p>The communication to the kernel module is done using netlink sockets and libnl. For the communicatin to the kernel, a new generic netlink family is created.</p>
<p><b>Additional features</b></p>
<ul>
<li><em>WriteBuffer</em>: Merges write operations to minimize actual write requests</li>
<li><em>HistoryBuffer</em>: Saves previously used data and minimizes read requests</li>
<li>Both features above can be enabled, disabled and customized</li>
</ul>
<h2>Dropbox plugin </h2>
<p>The dropbox plugin allows to use an existing dropboxaccount as storage backend for a tDisk.</p>
<p>The file structure of a tDisk in the dropbox looks like the following:</p><ul>
<li>Dropbox root directory<ul>
<li>tDisk folder (user defined name)<ul>
<li>1.td</li>
<li>2.td</li>
<li>...</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Each file has the same size (= dropbox specific blocksize)</p>
<h1>tDisk tests </h1>
<p>The following tests are currently available:</p><ul>
<li>IO verify</li>
<li>IO verfy files</li>
<li>Random IOs</li>
</ul>
<h2>IO verify </h2>
<p>Uses random data, writes it to a disk, waits some time and reads the same data from the disk and verifies it</p>
<h2>IO verify files </h2>
<p>More or less tha same as IO verify but doesn't write directly to the disk but uses a folder to create files which contain the random data</p>
<h2>Random IOs </h2>
<p>Generates random read/write IOs on a device and measures the performance </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 1 2016 15:59:26 for tDisk userspace module by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
