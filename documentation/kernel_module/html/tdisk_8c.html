<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tDisk kernel module: tdisk.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tDisk kernel module
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_881ab206e10a3ce1a13b73cfff848437.html">kernel_module</a></li><li class="navelem"><a class="el" href="dir_ee0db68b255c9dec9b97c46e52efdc58.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tdisk.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="config_8h_source.html">tdisk/config.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="helpers_8h_source.html">helpers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tdisk_8h_source.html">tdisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tdisk__control_8h_source.html">tdisk_control.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tdisk__file_8h_source.html">tdisk_file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tdisk__performance_8h_source.html">tdisk_performance.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tdisk__plugin_8h_source.html">tdisk_plugin.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a34d12e2e386464a40aff3b4d9cf7019e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a34d12e2e386464a40aff3b4d9cf7019e">COMPARE</a>&#160;&#160;&#160;1410</td></tr>
<tr class="memdesc:a34d12e2e386464a40aff3b4d9cf7019e"><td class="mdescLeft">&#160;</td><td class="mdescRight">tDisk Driver  <a href="#a34d12e2e386464a40aff3b4d9cf7019e">More...</a><br /></td></tr>
<tr class="separator:a34d12e2e386464a40aff3b4d9cf7019e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cd60e49ebd11892d1cfde960552b420"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a2cd60e49ebd11892d1cfde960552b420">DEFAULT_WORKER_TIMEOUT</a>&#160;&#160;&#160;(20*HZ)</td></tr>
<tr class="separator:a2cd60e49ebd11892d1cfde960552b420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f08e3921f85020b9022f73ab0dee60b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a4f08e3921f85020b9022f73ab0dee60b">DEFAULT_SECONDARY_WORK_DELAY</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a4f08e3921f85020b9022f73ab0dee60b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f3cd5bde7d63a721b530c21be99cc0e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a6f3cd5bde7d63a721b530c21be99cc0e">DEVICE_INDEX</a>(desired,  all_devices)&#160;&#160;&#160;((<a class="el" href="interface_8h.html#affd8cffebb9bfeaab075a6d080bbc085">tdisk_index</a>)((desired)-(all_devices)+1))</td></tr>
<tr class="memdesc:a6f3cd5bde7d63a721b530c21be99cc0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actual internal device calculated using memory offset.  <a href="#a6f3cd5bde7d63a721b530c21be99cc0e">More...</a><br /></td></tr>
<tr class="separator:a6f3cd5bde7d63a721b530c21be99cc0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a792699c121641109418462ce84f84283"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a792699c121641109418462ce84f84283">SECTOR_USED</a>(sector)&#160;&#160;&#160;((sector) &amp; 1)</td></tr>
<tr class="memdesc:a792699c121641109418462ce84f84283"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the sector is used given the access count.  <a href="#a792699c121641109418462ce84f84283">More...</a><br /></td></tr>
<tr class="separator:a792699c121641109418462ce84f84283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab55c9b7ee852b21b12da6fbfdb388b92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ab55c9b7ee852b21b12da6fbfdb388b92">INC_ACCESS_COUNT</a>(sector)&#160;&#160;&#160;(sector) = (typeof(sector))(((((sector)&gt;&gt;1)+1)&lt;&lt;1) | 1)</td></tr>
<tr class="memdesc:ab55c9b7ee852b21b12da6fbfdb388b92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments the access count.  <a href="#ab55c9b7ee852b21b12da6fbfdb388b92">More...</a><br /></td></tr>
<tr class="separator:ab55c9b7ee852b21b12da6fbfdb388b92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af25766d33102c4d40026124315cb3c54"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#af25766d33102c4d40026124315cb3c54">ACCESS_COUNT</a>(sector)&#160;&#160;&#160;((sector)&gt;&gt;1)</td></tr>
<tr class="memdesc:af25766d33102c4d40026124315cb3c54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the access count of the sector.  <a href="#af25766d33102c4d40026124315cb3c54">More...</a><br /></td></tr>
<tr class="separator:af25766d33102c4d40026124315cb3c54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad334084442766f6cbffefe7a1ebee191"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ad334084442766f6cbffefe7a1ebee191">RESET_ACCESS_COUNT</a>(sector)&#160;&#160;&#160;sector = (sector) &amp; 1</td></tr>
<tr class="memdesc:ad334084442766f6cbffefe7a1ebee191"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the access count of the sector.  <a href="#ad334084442766f6cbffefe7a1ebee191">More...</a><br /></td></tr>
<tr class="separator:ad334084442766f6cbffefe7a1ebee191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada124a745532029fdfcad6ee55622cff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ada124a745532029fdfcad6ee55622cff">SET_ACCESS_COUNT</a>(sector,  count)&#160;&#160;&#160;sector = (typeof(sector))(((sector) &amp; 1) | ((count)&lt;&lt;1))</td></tr>
<tr class="memdesc:ada124a745532029fdfcad6ee55622cff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the access count of the given sector.  <a href="#ada124a745532029fdfcad6ee55622cff">More...</a><br /></td></tr>
<tr class="separator:ada124a745532029fdfcad6ee55622cff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a024a1e7b7f78593a99cb43ce8d1402c8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a024a1e7b7f78593a99cb43ce8d1402c8">td_start_worker_thread</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td)</td></tr>
<tr class="memdesc:a024a1e7b7f78593a99cb43ce8d1402c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function starts the worker thread to handle the actual device operations.  <a href="#a024a1e7b7f78593a99cb43ce8d1402c8">More...</a><br /></td></tr>
<tr class="separator:a024a1e7b7f78593a99cb43ce8d1402c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28059be4f864c9f6afaaebb5143b29a6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a28059be4f864c9f6afaaebb5143b29a6">td_stop_worker_thread</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td)</td></tr>
<tr class="memdesc:a28059be4f864c9f6afaaebb5143b29a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the worker thread.  <a href="#a28059be4f864c9f6afaaebb5143b29a6">More...</a><br /></td></tr>
<tr class="separator:a28059be4f864c9f6afaaebb5143b29a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ac1c2ec899d11e9f93e8d94ae33faff"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="worker__timeout_8h.html#ae03919764e7b224fa7d5ac4624d83982">worker_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a1ac1c2ec899d11e9f93e8d94ae33faff">td_queue_work</a> (void *private_data, struct kthread_work *work)</td></tr>
<tr class="memdesc:a1ac1c2ec899d11e9f93e8d94ae33faff"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the actual worker function which is called by the worker thread.  <a href="#a1ac1c2ec899d11e9f93e8d94ae33faff">More...</a><br /></td></tr>
<tr class="separator:a1ac1c2ec899d11e9f93e8d94ae33faff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad94b36675e7eb067ea3ce6ff9e244a44"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ad94b36675e7eb067ea3ce6ff9e244a44">MODULE_LICENSE</a> (&quot;GPL&quot;)</td></tr>
<tr class="separator:ad94b36675e7eb067ea3ce6ff9e244a44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bfedbd1b6427eb9e89aef58a6c9d705"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a3bfedbd1b6427eb9e89aef58a6c9d705">MODULE_AUTHOR</a> (&quot;Thomas Sparber &lt;thomas@sparber.eu&gt;&quot;)</td></tr>
<tr class="separator:a3bfedbd1b6427eb9e89aef58a6c9d705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cbca7b2c027cbb21b00c05c17a957c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a4cbca7b2c027cbb21b00c05c17a957c8">MODULE_DESCRIPTION</a> (<a class="el" href="interface_8h.html#a25634d21648ca7fb7a2aca614bafaaeb">DRIVER_NAME</a>&quot; Driver&quot;)</td></tr>
<tr class="separator:a4cbca7b2c027cbb21b00c05c17a957c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4657c9486631ad359abaa3b7ffeccd1a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a4657c9486631ad359abaa3b7ffeccd1a">MODULE_ALIAS_BLOCKDEV_MAJOR</a> (<a class="el" href="tdisk_8c.html#a3ab416cb2b57e1ce4580511e115898e1">TD_MAJOR</a>)</td></tr>
<tr class="separator:a4657c9486631ad359abaa3b7ffeccd1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe0e26a8351543bdb2138bd0786a698c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#abe0e26a8351543bdb2138bd0786a698c">DEFINE_IDR</a> (td_index_idr)</td></tr>
<tr class="separator:abe0e26a8351543bdb2138bd0786a698c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada4a132e3d25b63733c8e0edfa5e3ad5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ada4a132e3d25b63733c8e0edfa5e3ad5">td_flush</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td)</td></tr>
<tr class="separator:ada4a132e3d25b63733c8e0edfa5e3ad5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7416ee55b81815dc405f452977f280f1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a7416ee55b81815dc405f452977f280f1">write_data</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, void *data, loff_t position, unsigned int length)</td></tr>
<tr class="memdesc:a7416ee55b81815dc405f452977f280f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that writes data to a device.  <a href="#a7416ee55b81815dc405f452977f280f1">More...</a><br /></td></tr>
<tr class="separator:a7416ee55b81815dc405f452977f280f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef5a276b75fc3125ea4ba57e59031cf0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#aef5a276b75fc3125ea4ba57e59031cf0">read_data</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, void *data, loff_t position, unsigned int length)</td></tr>
<tr class="memdesc:aef5a276b75fc3125ea4ba57e59031cf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that reads data from a device.  <a href="#aef5a276b75fc3125ea4ba57e59031cf0">More...</a><br /></td></tr>
<tr class="separator:aef5a276b75fc3125ea4ba57e59031cf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29930d5031aca4da37a5d1bf41a7e55f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a29930d5031aca4da37a5d1bf41a7e55f">write_bio_vec</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, struct bio_vec *bvec, loff_t *position)</td></tr>
<tr class="memdesc:a29930d5031aca4da37a5d1bf41a7e55f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that writes a bio_vec to a device.  <a href="#a29930d5031aca4da37a5d1bf41a7e55f">More...</a><br /></td></tr>
<tr class="separator:a29930d5031aca4da37a5d1bf41a7e55f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1efd2d4f27fce5d5f531ca6740da6421"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a1efd2d4f27fce5d5f531ca6740da6421">read_bio_vec</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, struct bio_vec *bvec, loff_t *position)</td></tr>
<tr class="memdesc:a1efd2d4f27fce5d5f531ca6740da6421"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that reads a bio_vec from a device.  <a href="#a1efd2d4f27fce5d5f531ca6740da6421">More...</a><br /></td></tr>
<tr class="separator:a1efd2d4f27fce5d5f531ca6740da6421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0f4e8c574f4a5e59ee4dba8f7d561dc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ad0f4e8c574f4a5e59ee4dba8f7d561dc">write_data_async</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, void *data, loff_t position, unsigned int length, void *private_data, void(*callback)(void *, long))</td></tr>
<tr class="memdesc:ad0f4e8c574f4a5e59ee4dba8f7d561dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that writes data to a device.  <a href="#ad0f4e8c574f4a5e59ee4dba8f7d561dc">More...</a><br /></td></tr>
<tr class="separator:ad0f4e8c574f4a5e59ee4dba8f7d561dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b66505044191954e2506b5a89aea5c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a41b66505044191954e2506b5a89aea5c">read_data_async</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, void *data, loff_t position, unsigned int length, void *private_data, void(*callback)(void *, long))</td></tr>
<tr class="memdesc:a41b66505044191954e2506b5a89aea5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that reads data from a device.  <a href="#a41b66505044191954e2506b5a89aea5c">More...</a><br /></td></tr>
<tr class="separator:a41b66505044191954e2506b5a89aea5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a127ecafc977eb70f6aee698eac1d4332"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a127ecafc977eb70f6aee698eac1d4332">write_bio_vec_async</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, struct bio_vec *bvec, loff_t position, void *private_data, void(*callback)(void *, long))</td></tr>
<tr class="memdesc:a127ecafc977eb70f6aee698eac1d4332"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that writes a bio_vec to a device.  <a href="#a127ecafc977eb70f6aee698eac1d4332">More...</a><br /></td></tr>
<tr class="separator:a127ecafc977eb70f6aee698eac1d4332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac380edd0d3a35291b5d428e215e5ee09"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ac380edd0d3a35291b5d428e215e5ee09">read_bio_vec_async</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, struct bio_vec *bvec, loff_t position, void *private_data, void(*callback)(void *, long))</td></tr>
<tr class="memdesc:ac380edd0d3a35291b5d428e215e5ee09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that reads a bio_vec from a device.  <a href="#ac380edd0d3a35291b5d428e215e5ee09">More...</a><br /></td></tr>
<tr class="separator:ac380edd0d3a35291b5d428e215e5ee09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0637c1cf3cedbdcd2dfeb4c93907cf14"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a0637c1cf3cedbdcd2dfeb4c93907cf14">flush_device</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device)</td></tr>
<tr class="memdesc:a0637c1cf3cedbdcd2dfeb4c93907cf14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that flushes a device.  <a href="#a0637c1cf3cedbdcd2dfeb4c93907cf14">More...</a><br /></td></tr>
<tr class="separator:a0637c1cf3cedbdcd2dfeb4c93907cf14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd71ce89b7266b5ec95db67cca456e70"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#afd71ce89b7266b5ec95db67cca456e70">device_alloc</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, loff_t position, unsigned int length)</td></tr>
<tr class="memdesc:afd71ce89b7266b5ec95db67cca456e70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that allocs space on a device.  <a href="#afd71ce89b7266b5ec95db67cca456e70">More...</a><br /></td></tr>
<tr class="separator:afd71ce89b7266b5ec95db67cca456e70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6634c65571b6a9594cb1dad4fd62d95e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a6634c65571b6a9594cb1dad4fd62d95e">device_is_ready</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device)</td></tr>
<tr class="memdesc:a6634c65571b6a9594cb1dad4fd62d95e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function that checks if a device is ready or not.  <a href="#a6634c65571b6a9594cb1dad4fd62d95e">More...</a><br /></td></tr>
<tr class="separator:a6634c65571b6a9594cb1dad4fd62d95e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2ac2de6430027382248318b34364d2b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ab2ac2de6430027382248318b34364d2b">td_flush_devices</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td)</td></tr>
<tr class="memdesc:ab2ac2de6430027382248318b34364d2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flushes the underlying devices of the tDisk.  <a href="#ab2ac2de6430027382248318b34364d2b">More...</a><br /></td></tr>
<tr class="separator:ab2ac2de6430027382248318b34364d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d3def15917c648547ea4e4ab3394317"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a3d3def15917c648547ea4e4ab3394317">td_write_all_indices</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device)</td></tr>
<tr class="memdesc:a3d3def15917c648547ea4e4ab3394317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes all the sector indices to the device.  <a href="#a3d3def15917c648547ea4e4ab3394317">More...</a><br /></td></tr>
<tr class="separator:a3d3def15917c648547ea4e4ab3394317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97861b5c4ef4f2807d29ef1f1c74fe64"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a97861b5c4ef4f2807d29ef1f1c74fe64">td_write_index_to_disk</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, sector_t logical_sector, <a class="el" href="interface_8h.html#affd8cffebb9bfeaab075a6d080bbc085">tdisk_index</a> disk)</td></tr>
<tr class="memdesc:a97861b5c4ef4f2807d29ef1f1c74fe64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the given sector index to the given internal device.  <a href="#a97861b5c4ef4f2807d29ef1f1c74fe64">More...</a><br /></td></tr>
<tr class="separator:a97861b5c4ef4f2807d29ef1f1c74fe64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a065827e59437fce3cdf0603d56e5c3a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a065827e59437fce3cdf0603d56e5c3a8">td_write_index_to_disk_async</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, sector_t logical_sector, <a class="el" href="interface_8h.html#affd8cffebb9bfeaab075a6d080bbc085">tdisk_index</a> disk, void *private_data, void(*callback)(void *, long))</td></tr>
<tr class="memdesc:a065827e59437fce3cdf0603d56e5c3a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the given sector index to the given internal device aysnchronously.  <a href="#a065827e59437fce3cdf0603d56e5c3a8">More...</a><br /></td></tr>
<tr class="separator:a065827e59437fce3cdf0603d56e5c3a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1050db79753eb77efec01765efd1e66f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a1050db79753eb77efec01765efd1e66f">td_perform_index_operation</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, int direction, sector_t logical_sector, struct sector_index *physical_sector, bool do_disk_operation, bool update_access_count)</td></tr>
<tr class="memdesc:a1050db79753eb77efec01765efd1e66f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs the given index operation.  <a href="#a1050db79753eb77efec01765efd1e66f">More...</a><br /></td></tr>
<tr class="separator:a1050db79753eb77efec01765efd1e66f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0f70cbc430d47e38c5ea47fbfb15471"><td class="memItemLeft" align="right" valign="top">static unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ad0f70cbc430d47e38c5ea47fbfb15471">td_get_device_performance</a> (const struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *d)</td></tr>
<tr class="memdesc:ad0f70cbc430d47e38c5ea47fbfb15471"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the heuristic function that calculates the speed of a device.  <a href="#ad0f70cbc430d47e38c5ea47fbfb15471">More...</a><br /></td></tr>
<tr class="separator:ad0f70cbc430d47e38c5ea47fbfb15471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c5c954468f58bbd3d83f1ac53fbe58d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a1c5c954468f58bbd3d83f1ac53fbe58d">td_swap_sectors</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, sector_t logical_a, struct sector_index *a, sector_t logical_b, struct sector_index *b)</td></tr>
<tr class="memdesc:a1c5c954468f58bbd3d83f1ac53fbe58d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function physically swaps the two given sectors.  <a href="#a1c5c954468f58bbd3d83f1ac53fbe58d">More...</a><br /></td></tr>
<tr class="separator:a1c5c954468f58bbd3d83f1ac53fbe58d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe44fd4301e1a613584c0cba063a1d36"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#abe44fd4301e1a613584c0cba063a1d36">td_sector_index_callback_total</a> (void *priv, struct list_head *a, struct list_head *b)</td></tr>
<tr class="memdesc:abe44fd4301e1a613584c0cba063a1d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">This callback is used by the list_sort to determine the order of a sector index.  <a href="#abe44fd4301e1a613584c0cba063a1d36">More...</a><br /></td></tr>
<tr class="separator:abe44fd4301e1a613584c0cba063a1d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7c9f870d85abfae3b133fed4eca5de5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ac7c9f870d85abfae3b133fed4eca5de5">td_reorganize_all_indices</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td)</td></tr>
<tr class="memdesc:ac7c9f870d85abfae3b133fed4eca5de5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sorts all the sector indices This is useful at the loading time.  <a href="#ac7c9f870d85abfae3b133fed4eca5de5">More...</a><br /></td></tr>
<tr class="separator:ac7c9f870d85abfae3b133fed4eca5de5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe3ef44bd53b6ced274645aa161cc88"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#abbe3ef44bd53b6ced274645aa161cc88">td_is_compatible_header</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct tdisk_header *header)</td></tr>
<tr class="memdesc:abbe3ef44bd53b6ced274645aa161cc88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the given disk header is compatible with the current driver.  <a href="#abbe3ef44bd53b6ced274645aa161cc88">More...</a><br /></td></tr>
<tr class="separator:abbe3ef44bd53b6ced274645aa161cc88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d09b8f3bf325ef0708b310cf980ca3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#af1d09b8f3bf325ef0708b310cf980ca3">td_read_header</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, struct tdisk_header *header, bool first_device, int *index_operation_to_do)</td></tr>
<tr class="memdesc:af1d09b8f3bf325ef0708b310cf980ca3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the td header from the given device and measures the disk performance if perf != NULL.  <a href="#af1d09b8f3bf325ef0708b310cf980ca3">More...</a><br /></td></tr>
<tr class="separator:af1d09b8f3bf325ef0708b310cf980ca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bf9aa5806e550a172fad50351f00d43"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a3bf9aa5806e550a172fad50351f00d43">td_write_header</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, struct tdisk_header *header)</td></tr>
<tr class="memdesc:a3bf9aa5806e550a172fad50351f00d43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the td header to the given device and measures the disk performance if perf != NULL.  <a href="#a3bf9aa5806e550a172fad50351f00d43">More...</a><br /></td></tr>
<tr class="separator:a3bf9aa5806e550a172fad50351f00d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2257008d123cf68b79268d8d4fef4081"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a2257008d123cf68b79268d8d4fef4081">td_read_all_indices</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *device, u8 *data)</td></tr>
<tr class="memdesc:a2257008d123cf68b79268d8d4fef4081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads all the sector indices from the device and stores them in data.  <a href="#a2257008d123cf68b79268d8d4fef4081">More...</a><br /></td></tr>
<tr class="separator:a2257008d123cf68b79268d8d4fef4081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad269eeb4a7ec54792f7b658253fa62e3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ad269eeb4a7ec54792f7b658253fa62e3">async_request_callback</a> (void *private_data, long ret)</td></tr>
<tr class="memdesc:ad269eeb4a7ec54792f7b658253fa62e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This callback is used for async file operations.  <a href="#ad269eeb4a7ec54792f7b658253fa62e3">More...</a><br /></td></tr>
<tr class="separator:ad269eeb4a7ec54792f7b658253fa62e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3d78e85e0eb26deae43a19adc91413e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#aa3d78e85e0eb26deae43a19adc91413e">td_do_disk_operation</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct request *rq)</td></tr>
<tr class="memdesc:aa3d78e85e0eb26deae43a19adc91413e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function does the actual device operations.  <a href="#aa3d78e85e0eb26deae43a19adc91413e">More...</a><br /></td></tr>
<tr class="separator:aa3d78e85e0eb26deae43a19adc91413e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63a83d5adb32dbea46667b8f981f2d05"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a63a83d5adb32dbea46667b8f981f2d05">td_do_disk_operation_async</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct request *rq)</td></tr>
<tr class="memdesc:a63a83d5adb32dbea46667b8f981f2d05"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function does the actual device operations.  <a href="#a63a83d5adb32dbea46667b8f981f2d05">More...</a><br /></td></tr>
<tr class="separator:a63a83d5adb32dbea46667b8f981f2d05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac210c3bc41b97100a2175bf3f257bbe4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ac210c3bc41b97100a2175bf3f257bbe4">td_reread_partitions</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct block_device *bdev)</td></tr>
<tr class="memdesc:ac210c3bc41b97100a2175bf3f257bbe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the partition table of the tDisk.  <a href="#ac210c3bc41b97100a2175bf3f257bbe4">More...</a><br /></td></tr>
<tr class="separator:ac210c3bc41b97100a2175bf3f257bbe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73b4aaf19381e522e33cf9bd18458383"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a73b4aaf19381e522e33cf9bd18458383">td_get_max_sectors_header_increase</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, sector_t max_sectors)</td></tr>
<tr class="memdesc:a73b4aaf19381e522e33cf9bd18458383"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns how much MORE sectors would be needed to store the sector indices if the tDisk would be resized to the given size.  <a href="#a73b4aaf19381e522e33cf9bd18458383">More...</a><br /></td></tr>
<tr class="separator:a73b4aaf19381e522e33cf9bd18458383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89edefac29fc4790b3c342c6b3aebb38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a89edefac29fc4790b3c342c6b3aebb38">td_reset_sectors</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td)</td></tr>
<tr class="memdesc:a89edefac29fc4790b3c342c6b3aebb38"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function resets the already resized sector indices and sorted sectors if an error occurred while adding a new internal device.  <a href="#a89edefac29fc4790b3c342c6b3aebb38">More...</a><br /></td></tr>
<tr class="separator:a89edefac29fc4790b3c342c6b3aebb38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae660b62d97f779b17ec9cf9341f99aa2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ae660b62d97f779b17ec9cf9341f99aa2">td_set_max_sectors</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, sector_t max_sectors)</td></tr>
<tr class="memdesc:ae660b62d97f779b17ec9cf9341f99aa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to resize the sector indices.  <a href="#ae660b62d97f779b17ec9cf9341f99aa2">More...</a><br /></td></tr>
<tr class="separator:ae660b62d97f779b17ec9cf9341f99aa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2105ec12af66e7675e9b6c81391eec1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ab2105ec12af66e7675e9b6c81391eec1">set_device_parameters</a> (struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *new_device, struct <a class="el" href="interface_8h.html#structinternal__device__add__parameters">internal_device_add_parameters</a> __user *arg)</td></tr>
<tr class="memdesc:ab2105ec12af66e7675e9b6c81391eec1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the <a class="el" href="interface_8h.html#structinternal__device__add__parameters" title="This struct is used for the &quot;ADD_DISK&quot; ioctl to add a specific device to a tDisk. ...">internal_device_add_parameters</a> to the actual new internal device.  <a href="#ab2105ec12af66e7675e9b6c81391eec1">More...</a><br /></td></tr>
<tr class="separator:ab2105ec12af66e7675e9b6c81391eec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e930709eb141176957d5989d7336872"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a2e930709eb141176957d5989d7336872">device_should_format</a> (struct <a class="el" href="interface_8h.html#structinternal__device__add__parameters">internal_device_add_parameters</a> __user *arg)</td></tr>
<tr class="memdesc:a2e930709eb141176957d5989d7336872"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the <a class="el" href="interface_8h.html#structinternal__device__add__parameters" title="This struct is used for the &quot;ADD_DISK&quot; ioctl to add a specific device to a tDisk. ...">internal_device_add_parameters</a> to the actual new internal device.  <a href="#a2e930709eb141176957d5989d7336872">More...</a><br /></td></tr>
<tr class="separator:a2e930709eb141176957d5989d7336872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55115d4e1ad049651e2eb378bdbeb715"><td class="memItemLeft" align="right" valign="top">static sector_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a55115d4e1ad049651e2eb378bdbeb715">find_move_help_sector</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, <a class="el" href="interface_8h.html#affd8cffebb9bfeaab075a6d080bbc085">tdisk_index</a> disk, sector_t max_sector)</td></tr>
<tr class="separator:a55115d4e1ad049651e2eb378bdbeb715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa46e93482f86d50df7d6604547fe2502"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#aa46e93482f86d50df7d6604547fe2502">td_add_disk</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, fmode_t mode, struct block_device *bdev, struct <a class="el" href="interface_8h.html#structinternal__device__add__parameters">internal_device_add_parameters</a> __user *arg)</td></tr>
<tr class="memdesc:aa46e93482f86d50df7d6604547fe2502"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the given internal device to the tDisk.  <a href="#aa46e93482f86d50df7d6604547fe2502">More...</a><br /></td></tr>
<tr class="separator:aa46e93482f86d50df7d6604547fe2502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6d2ead6729110ce1397f1ac4c882221"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ab6d2ead6729110ce1397f1ac4c882221">td_get_status</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct <a class="el" href="interface_8h.html#structtdisk__info">tdisk_info</a> __user *arg)</td></tr>
<tr class="memdesc:ab6d2ead6729110ce1397f1ac4c882221"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function transfers device status information to user space.  <a href="#ab6d2ead6729110ce1397f1ac4c882221">More...</a><br /></td></tr>
<tr class="separator:ab6d2ead6729110ce1397f1ac4c882221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac722716bc8b96e8bd580cc4c0e31b595"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ac722716bc8b96e8bd580cc4c0e31b595">td_get_device_info</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct <a class="el" href="interface_8h.html#structinternal__device__info">internal_device_info</a> __user *arg)</td></tr>
<tr class="memdesc:ac722716bc8b96e8bd580cc4c0e31b595"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function transfers information about the internal devices to user space.  <a href="#ac722716bc8b96e8bd580cc4c0e31b595">More...</a><br /></td></tr>
<tr class="separator:ac722716bc8b96e8bd580cc4c0e31b595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e2dde1cc828b0c1af07a524789b170e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a1e2dde1cc828b0c1af07a524789b170e">td_get_sector_index</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct <a class="el" href="interface_8h.html#structphysical__sector__index">physical_sector_index</a> __user *arg)</td></tr>
<tr class="memdesc:a1e2dde1cc828b0c1af07a524789b170e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function transfers information about the given logical sector to user space.  <a href="#a1e2dde1cc828b0c1af07a524789b170e">More...</a><br /></td></tr>
<tr class="separator:a1e2dde1cc828b0c1af07a524789b170e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98a7d278bed3e745b9fd23d4b9b7e5c3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a98a7d278bed3e745b9fd23d4b9b7e5c3">td_get_all_sector_indices</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td, struct <a class="el" href="interface_8h.html#structsector__info">sector_info</a> __user *arg)</td></tr>
<tr class="memdesc:a98a7d278bed3e745b9fd23d4b9b7e5c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function transfers information about all logical sectors to user space.  <a href="#a98a7d278bed3e745b9fd23d4b9b7e5c3">More...</a><br /></td></tr>
<tr class="separator:a98a7d278bed3e745b9fd23d4b9b7e5c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55b3fde333368f4869b5a58c56ee0301"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a55b3fde333368f4869b5a58c56ee0301">td_clear_access_count</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td)</td></tr>
<tr class="memdesc:a55b3fde333368f4869b5a58c56ee0301"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function clears the access count of all sectors.  <a href="#a55b3fde333368f4869b5a58c56ee0301">More...</a><br /></td></tr>
<tr class="separator:a55b3fde333368f4869b5a58c56ee0301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503596ed44bb46b9b677cdcee315af2b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a503596ed44bb46b9b677cdcee315af2b">td_ioctl</a> (struct block_device *bdev, fmode_t mode, unsigned int cmd, unsigned long arg)</td></tr>
<tr class="memdesc:a503596ed44bb46b9b677cdcee315af2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles all ioctl coming from userspace.  <a href="#a503596ed44bb46b9b677cdcee315af2b">More...</a><br /></td></tr>
<tr class="separator:a503596ed44bb46b9b677cdcee315af2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d2aad48720f719c7d748a78e6b23280"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a4d2aad48720f719c7d748a78e6b23280">td_open</a> (struct block_device *bdev, fmode_t mode)</td></tr>
<tr class="memdesc:a4d2aad48720f719c7d748a78e6b23280"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called by the kernel whenever it it needs the device.  <a href="#a4d2aad48720f719c7d748a78e6b23280">More...</a><br /></td></tr>
<tr class="separator:a4d2aad48720f719c7d748a78e6b23280"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e5539a1a5601e4fe32720bdf1ace7fc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a3e5539a1a5601e4fe32720bdf1ace7fc">td_release</a> (struct gendisk *disk, fmode_t mode)</td></tr>
<tr class="memdesc:a3e5539a1a5601e4fe32720bdf1ace7fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called by the kernel whenever it doesn't need the device anymore.  <a href="#a3e5539a1a5601e4fe32720bdf1ace7fc">More...</a><br /></td></tr>
<tr class="separator:a3e5539a1a5601e4fe32720bdf1ace7fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ab4b6ac9f074e0fdc8ca2ca5125a0c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ab5ab4b6ac9f074e0fdc8ca2ca5125a0c">td_init_request</a> (void *data, struct request *rq, unsigned int hctx_idx, unsigned int request_idx, unsigned int numa_node)</td></tr>
<tr class="memdesc:ab5ab4b6ac9f074e0fdc8ca2ca5125a0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called for every request before it is given to the workr thread.  <a href="#ab5ab4b6ac9f074e0fdc8ca2ca5125a0c">More...</a><br /></td></tr>
<tr class="separator:ab5ab4b6ac9f074e0fdc8ca2ca5125a0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acacec26fa7ba78bdd565596ffcd44701"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#acacec26fa7ba78bdd565596ffcd44701">td_queue_rq</a> (struct blk_mq_hw_ctx *hctx, const struct blk_mq_queue_data *bd)</td></tr>
<tr class="memdesc:acacec26fa7ba78bdd565596ffcd44701"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called by the kernel for each request it reqeives.  <a href="#acacec26fa7ba78bdd565596ffcd44701">More...</a><br /></td></tr>
<tr class="separator:acacec26fa7ba78bdd565596ffcd44701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5a1a034d21544116d4c09c993462376"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ac5a1a034d21544116d4c09c993462376">tdisk_add</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> **t, int i, unsigned int blocksize)</td></tr>
<tr class="memdesc:ac5a1a034d21544116d4c09c993462376"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function creates a new tDisk with the given minor number, and blocksize.  <a href="#ac5a1a034d21544116d4c09c993462376">More...</a><br /></td></tr>
<tr class="separator:ac5a1a034d21544116d4c09c993462376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd5e2f82be480bdbf9f7495bc9263ca9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#acd5e2f82be480bdbf9f7495bc9263ca9">tdisk_remove</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *td)</td></tr>
<tr class="memdesc:acd5e2f82be480bdbf9f7495bc9263ca9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called to remove a tDisk.  <a href="#acd5e2f82be480bdbf9f7495bc9263ca9">More...</a><br /></td></tr>
<tr class="separator:acd5e2f82be480bdbf9f7495bc9263ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a318b6ad0da3f9469036fa9d493cf556e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a318b6ad0da3f9469036fa9d493cf556e">tdisk_find_free_device_callback</a> (int id, void *ptr, void *data)</td></tr>
<tr class="memdesc:a318b6ad0da3f9469036fa9d493cf556e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to find the next free minor number in the idr.  <a href="#a318b6ad0da3f9469036fa9d493cf556e">More...</a><br /></td></tr>
<tr class="separator:a318b6ad0da3f9469036fa9d493cf556e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78c187c25686e89762a64ab261230582"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a78c187c25686e89762a64ab261230582">tdisk_lookup</a> (struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> **t, int i)</td></tr>
<tr class="memdesc:a78c187c25686e89762a64ab261230582"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns the tDisk for the given minor number.  <a href="#a78c187c25686e89762a64ab261230582">More...</a><br /></td></tr>
<tr class="separator:a78c187c25686e89762a64ab261230582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11577c3ce164dc2e8c8b34ee0948a0fd"><td class="memItemLeft" align="right" valign="top">static int __init&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a11577c3ce164dc2e8c8b34ee0948a0fd">tdisk_init</a> (void)</td></tr>
<tr class="memdesc:a11577c3ce164dc2e8c8b34ee0948a0fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This funtction is the main entry point of the driver.  <a href="#a11577c3ce164dc2e8c8b34ee0948a0fd">More...</a><br /></td></tr>
<tr class="separator:a11577c3ce164dc2e8c8b34ee0948a0fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fa9045f35e110b774aefdeae02490cb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a3fa9045f35e110b774aefdeae02490cb">tdisk_exit_callback</a> (int id, void *ptr, void *data)</td></tr>
<tr class="memdesc:a3fa9045f35e110b774aefdeae02490cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This callback function is called for each tDisk at driver exit time to clean up all remaining devices.  <a href="#a3fa9045f35e110b774aefdeae02490cb">More...</a><br /></td></tr>
<tr class="separator:a3fa9045f35e110b774aefdeae02490cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7e8ffe75328d489db81c216caa8fc21"><td class="memItemLeft" align="right" valign="top">static void __exit&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#af7e8ffe75328d489db81c216caa8fc21">tdisk_exit</a> (void)</td></tr>
<tr class="memdesc:af7e8ffe75328d489db81c216caa8fc21"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the exit function for the tDisk driver.  <a href="#af7e8ffe75328d489db81c216caa8fc21">More...</a><br /></td></tr>
<tr class="separator:af7e8ffe75328d489db81c216caa8fc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e8d8a77992f966538e4a610d6ebbea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ab5e8d8a77992f966538e4a610d6ebbea">module_init</a> (<a class="el" href="tdisk_8c.html#a11577c3ce164dc2e8c8b34ee0948a0fd">tdisk_init</a>)</td></tr>
<tr class="separator:ab5e8d8a77992f966538e4a610d6ebbea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa08dff1b8c2e0427a7aa49690051b5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#adaa08dff1b8c2e0427a7aa49690051b5">module_exit</a> (<a class="el" href="tdisk_8c.html#af7e8ffe75328d489db81c216caa8fc21">tdisk_exit</a>)</td></tr>
<tr class="separator:adaa08dff1b8c2e0427a7aa49690051b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3ab416cb2b57e1ce4580511e115898e1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a3ab416cb2b57e1ce4580511e115898e1">TD_MAJOR</a> = 0</td></tr>
<tr class="separator:a3ab416cb2b57e1ce4580511e115898e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3d1798b9cf3045b991c2731a2008a57"><td class="memItemLeft" align="right" valign="top">static const struct block_device_operations&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#ac3d1798b9cf3045b991c2731a2008a57">td_fops</a></td></tr>
<tr class="memdesc:ac3d1798b9cf3045b991c2731a2008a57"><td class="mdescLeft">&#160;</td><td class="mdescRight">The block device operations which are presented to the kernel.  <a href="#ac3d1798b9cf3045b991c2731a2008a57">More...</a><br /></td></tr>
<tr class="separator:ac3d1798b9cf3045b991c2731a2008a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a43f0b91f8791d051f93a01c1c1d06c"><td class="memItemLeft" align="right" valign="top">static struct blk_mq_ops&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tdisk_8c.html#a6a43f0b91f8791d051f93a01c1c1d06c">tdisk_mq_ops</a></td></tr>
<tr class="memdesc:a6a43f0b91f8791d051f93a01c1c1d06c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This struct defines the functions to dispatch requests.  <a href="#a6a43f0b91f8791d051f93a01c1c1d06c">More...</a><br /></td></tr>
<tr class="separator:a6a43f0b91f8791d051f93a01c1c1d06c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="af25766d33102c4d40026124315cb3c54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACCESS_COUNT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sector</td><td>)</td>
          <td>&#160;&#160;&#160;((sector)&gt;&gt;1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the access count of the sector. </p>

</div>
</div>
<a class="anchor" id="a34d12e2e386464a40aff3b4d9cf7019e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMPARE&#160;&#160;&#160;1410</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tDisk Driver </p>
<dl class="section author"><dt>Author</dt><dd>Thomas Sparber (2015-2016) </dd></dl>

</div>
</div>
<a class="anchor" id="a4f08e3921f85020b9022f73ab0dee60b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_SECONDARY_WORK_DELAY&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2cd60e49ebd11892d1cfde960552b420"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_WORKER_TIMEOUT&#160;&#160;&#160;(20*HZ)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6f3cd5bde7d63a721b530c21be99cc0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEVICE_INDEX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">desired, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">all_devices&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((<a class="el" href="interface_8h.html#affd8cffebb9bfeaab075a6d080bbc085">tdisk_index</a>)((desired)-(all_devices)+1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actual internal device calculated using memory offset. </p>

</div>
</div>
<a class="anchor" id="ab55c9b7ee852b21b12da6fbfdb388b92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INC_ACCESS_COUNT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sector</td><td>)</td>
          <td>&#160;&#160;&#160;(sector) = (typeof(sector))(((((sector)&gt;&gt;1)+1)&lt;&lt;1) | 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increments the access count. </p>

</div>
</div>
<a class="anchor" id="ad334084442766f6cbffefe7a1ebee191"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RESET_ACCESS_COUNT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sector</td><td>)</td>
          <td>&#160;&#160;&#160;sector = (sector) &amp; 1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the access count of the sector. </p>

</div>
</div>
<a class="anchor" id="a792699c121641109418462ce84f84283"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SECTOR_USED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sector</td><td>)</td>
          <td>&#160;&#160;&#160;((sector) &amp; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether the sector is used given the access count. </p>

</div>
</div>
<a class="anchor" id="ada124a745532029fdfcad6ee55622cff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SET_ACCESS_COUNT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sector, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">count&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;sector = (typeof(sector))(((sector) &amp; 1) | ((count)&lt;&lt;1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the access count of the given sector. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ad269eeb4a7ec54792f7b658253fa62e3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void async_request_callback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>private_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This callback is used for async file operations. </p>

</div>
</div>
<a class="anchor" id="abe0e26a8351543bdb2138bd0786a698c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFINE_IDR </td>
          <td>(</td>
          <td class="paramtype">td_index_idr&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afd71ce89b7266b5ec95db67cca456e70"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int device_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that allocs space on a device. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<a class="anchor" id="a6634c65571b6a9594cb1dad4fd62d95e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool device_is_ready </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that checks if a device is ready or not. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<a class="anchor" id="a2e930709eb141176957d5989d7336872"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int device_should_format </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="interface_8h.html#structinternal__device__add__parameters">internal_device_add_parameters</a> __user *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies the <a class="el" href="interface_8h.html#structinternal__device__add__parameters" title="This struct is used for the &quot;ADD_DISK&quot; ioctl to add a specific device to a tDisk. ...">internal_device_add_parameters</a> to the actual new internal device. </p>

</div>
</div>
<a class="anchor" id="a55115d4e1ad049651e2eb378bdbeb715"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static sector_t find_move_help_sector </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_8h.html#affd8cffebb9bfeaab075a6d080bbc085">tdisk_index</a>&#160;</td>
          <td class="paramname"><em>disk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>max_sector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0637c1cf3cedbdcd2dfeb4c93907cf14"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int flush_device </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that flushes a device. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<a class="anchor" id="a4657c9486631ad359abaa3b7ffeccd1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_ALIAS_BLOCKDEV_MAJOR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tdisk_8c.html#a3ab416cb2b57e1ce4580511e115898e1">TD_MAJOR</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3bfedbd1b6427eb9e89aef58a6c9d705"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_AUTHOR </td>
          <td>(</td>
          <td class="paramtype">&quot;Thomas Sparber &lt;thomas@sparber.eu&gt;&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4cbca7b2c027cbb21b00c05c17a957c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_DESCRIPTION </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_8h.html#a25634d21648ca7fb7a2aca614bafaaeb">DRIVER_NAME</a>&quot; Driver&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adaa08dff1b8c2e0427a7aa49690051b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_exit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tdisk_8c.html#af7e8ffe75328d489db81c216caa8fc21">tdisk_exit</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab5e8d8a77992f966538e4a610d6ebbea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tdisk_8c.html#a11577c3ce164dc2e8c8b34ee0948a0fd">tdisk_init</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad94b36675e7eb067ea3ce6ff9e244a44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_LICENSE </td>
          <td>(</td>
          <td class="paramtype">&quot;GPL&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1efd2d4f27fce5d5f531ca6740da6421"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int read_bio_vec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct bio_vec *&#160;</td>
          <td class="paramname"><em>bvec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that reads a bio_vec from a device. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<a class="anchor" id="ac380edd0d3a35291b5d428e215e5ee09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void read_bio_vec_async </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct bio_vec *&#160;</td>
          <td class="paramname"><em>bvec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>private_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *, long)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that reads a bio_vec from a device. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<a class="anchor" id="aef5a276b75fc3125ea4ba57e59031cf0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int read_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that reads data from a device. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<a class="anchor" id="a41b66505044191954e2506b5a89aea5c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void read_data_async </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>private_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *, long)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that reads data from a device. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<a class="anchor" id="ab2105ec12af66e7675e9b6c81391eec1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_device_parameters </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>new_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="interface_8h.html#structinternal__device__add__parameters">internal_device_add_parameters</a> __user *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies the <a class="el" href="interface_8h.html#structinternal__device__add__parameters" title="This struct is used for the &quot;ADD_DISK&quot; ioctl to add a specific device to a tDisk. ...">internal_device_add_parameters</a> to the actual new internal device. </p>

</div>
</div>
<a class="anchor" id="aa46e93482f86d50df7d6604547fe2502"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_add_disk </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fmode_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct block_device *&#160;</td>
          <td class="paramname"><em>bdev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="interface_8h.html#structinternal__device__add__parameters">internal_device_add_parameters</a> __user *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds the given internal device to the tDisk. </p>
<p>This function reads the disk header, performs the correct index operation (WRITE, READ, COMPARE), adds it to the tDisk and informs user space about any changes (size, partitions...) </p>

</div>
</div>
<a class="anchor" id="a55b3fde333368f4869b5a58c56ee0301"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_clear_access_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function clears the access count of all sectors. </p>
<p>This is just for debugging purposes. </p>

</div>
</div>
<a class="anchor" id="aa3d78e85e0eb26deae43a19adc91413e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_do_disk_operation </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct request *&#160;</td>
          <td class="paramname"><em>rq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function does the actual device operations. </p>
<p>It extracts the logical sector and the data from the request. Then it searches for the corresponding disk and physical sector and does the actual device operation. Disk performances are also recorded. </p>

</div>
</div>
<a class="anchor" id="a63a83d5adb32dbea46667b8f981f2d05"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_do_disk_operation_async </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct request *&#160;</td>
          <td class="paramname"><em>rq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function does the actual device operations. </p>
<p>It extracts the logical sector and the data from the request. Then it searches for the corresponding disk and physical sector and does the actual device operation. Disk performances are also recorded. </p>

</div>
</div>
<a class="anchor" id="ada4a132e3d25b63733c8e0edfa5e3ad5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab2ac2de6430027382248318b34364d2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_flush_devices </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flushes the underlying devices of the tDisk. </p>

</div>
</div>
<a class="anchor" id="a98a7d278bed3e745b9fd23d4b9b7e5c3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_get_all_sector_indices </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="interface_8h.html#structsector__info">sector_info</a> __user *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function transfers information about all logical sectors to user space. </p>

</div>
</div>
<a class="anchor" id="ac722716bc8b96e8bd580cc4c0e31b595"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_get_device_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="interface_8h.html#structinternal__device__info">internal_device_info</a> __user *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function transfers information about the internal devices to user space. </p>

</div>
</div>
<a class="anchor" id="ad0f70cbc430d47e38c5ea47fbfb15471"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long long td_get_device_performance </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is the heuristic function that calculates the speed of a device. </p>

</div>
</div>
<a class="anchor" id="a73b4aaf19381e522e33cf9bd18458383"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td_get_max_sectors_header_increase </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>max_sectors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns how much MORE sectors would be needed to store the sector indices if the tDisk would be resized to the given size. </p>

</div>
</div>
<a class="anchor" id="a1e2dde1cc828b0c1af07a524789b170e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_get_sector_index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="interface_8h.html#structphysical__sector__index">physical_sector_index</a> __user *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function transfers information about the given logical sector to user space. </p>

</div>
</div>
<a class="anchor" id="ab6d2ead6729110ce1397f1ac4c882221"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_get_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="interface_8h.html#structtdisk__info">tdisk_info</a> __user *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function transfers device status information to user space. </p>

</div>
</div>
<a class="anchor" id="ab5ab4b6ac9f074e0fdc8ca2ca5125a0c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_init_request </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct request *&#160;</td>
          <td class="paramname"><em>rq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>hctx_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>request_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>numa_node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is called for every request before it is given to the workr thread. </p>
<p>This makes it possible to initialize it and add information </p>

</div>
</div>
<a class="anchor" id="a503596ed44bb46b9b677cdcee315af2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_ioctl </td>
          <td>(</td>
          <td class="paramtype">struct block_device *&#160;</td>
          <td class="paramname"><em>bdev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fmode_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function handles all ioctl coming from userspace. </p>

</div>
</div>
<a class="anchor" id="abbe3ef44bd53b6ced274645aa161cc88"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_is_compatible_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tdisk_header *&#160;</td>
          <td class="paramname"><em>header</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the given disk header is compatible with the current driver. </p>
<p>It returns one of the following values:</p><ul>
<li>0 if the header is compatible (current driver version is higher or equal)</li>
<li>1 if the given header was from an entirely new disk. This means it needs to be initialized</li>
<li>-1 if the the header was from a driver with a greater minor version than the current driver. It may be compatible...</li>
<li>-2 if the the header was from a driver with a greater major version than the current driver. It may be compatible but probably not... </li>
</ul>

</div>
</div>
<a class="anchor" id="a4d2aad48720f719c7d748a78e6b23280"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_open </td>
          <td>(</td>
          <td class="paramtype">struct block_device *&#160;</td>
          <td class="paramname"><em>bdev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fmode_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is called by the kernel whenever it it needs the device. </p>
<p>This is useful for us to count the references </p>

</div>
</div>
<a class="anchor" id="a1050db79753eb77efec01765efd1e66f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td_perform_index_operation </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>logical_sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sector_index *&#160;</td>
          <td class="paramname"><em>physical_sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>do_disk_operation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>update_access_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs the given index operation. </p>
<p>This can be:</p><ul>
<li>READ: reads the physical sector index for the given logical sector</li>
<li>WRITE: stores the given physical sector index for the given logical sector. The data are also stored to each physical disk</li>
<li>COMPARE: Compares the given physical sector index with the actual one. This is useful to compare individual disks for consistency. The flag do_disk_operation can be used to define whether the data should be written or not. Usually it is a good idea to write the data immediately to disk to prevent data loss, but in case there are multiple index operations to write it is better to write them all at once. The flag update_access_count can be used to define whether the access count of the specific sector should be updated. This is useful e.g. when sectors are moved - this shouldn't influence the access count variable. </li>
</ul>

</div>
</div>
<a class="anchor" id="acacec26fa7ba78bdd565596ffcd44701"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_queue_rq </td>
          <td>(</td>
          <td class="paramtype">struct blk_mq_hw_ctx *&#160;</td>
          <td class="paramname"><em>hctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct blk_mq_queue_data *&#160;</td>
          <td class="paramname"><em>bd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is called by the kernel for each request it reqeives. </p>
<p>This function hands it over to the worker thread. </p>

</div>
</div>
<a class="anchor" id="a1ac1c2ec899d11e9f93e8d94ae33faff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="worker__timeout_8h.html#ae03919764e7b224fa7d5ac4624d83982">worker_status</a> td_queue_work </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>private_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct kthread_work *&#160;</td>
          <td class="paramname"><em>work</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is the actual worker function which is called by the worker thread. </p>
<p>It does the file operations and moves the sectors </p>

</div>
</div>
<a class="anchor" id="a2257008d123cf68b79268d8d4fef4081"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_read_all_indices </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads all the sector indices from the device and stores them in data. </p>

</div>
</div>
<a class="anchor" id="af1d09b8f3bf325ef0708b310cf980ca3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_read_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tdisk_header *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>index_operation_to_do</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads the td header from the given device and measures the disk performance if perf != NULL. </p>

</div>
</div>
<a class="anchor" id="a3e5539a1a5601e4fe32720bdf1ace7fc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void td_release </td>
          <td>(</td>
          <td class="paramtype">struct gendisk *&#160;</td>
          <td class="paramname"><em>disk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fmode_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is called by the kernel whenever it doesn't need the device anymore. </p>
<p>If we tried to clear the tDisk with an elevated reference count, we will clear it here once the reference count reaches 0. </p>

</div>
</div>
<a class="anchor" id="ac7c9f870d85abfae3b133fed4eca5de5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool td_reorganize_all_indices </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sorts all the sector indices This is useful at the loading time. </p>

</div>
</div>
<a class="anchor" id="ac210c3bc41b97100a2175bf3f257bbe4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void td_reread_partitions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct block_device *&#160;</td>
          <td class="paramname"><em>bdev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the partition table of the tDisk. </p>

</div>
</div>
<a class="anchor" id="a89edefac29fc4790b3c342c6b3aebb38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td_reset_sectors </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function resets the already resized sector indices and sorted sectors if an error occurred while adding a new internal device. </p>

</div>
</div>
<a class="anchor" id="abe44fd4301e1a613584c0cba063a1d36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td_sector_index_callback_total </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>priv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_head *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This callback is used by the list_sort to determine the order of a sector index. </p>

</div>
</div>
<a class="anchor" id="ae660b62d97f779b17ec9cf9341f99aa2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td_set_max_sectors </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>max_sectors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is used to resize the sector indices. </p>
<p>It also sets all the required parameters in the tDisk. The function returns the amount of additional blocks which are used to store the increased amount of sectors (can be 0) or a negative value when an error happened. </p>

</div>
</div>
<a class="anchor" id="a024a1e7b7f78593a99cb43ce8d1402c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_start_worker_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function starts the worker thread to handle the actual device operations. </p>

</div>
</div>
<a class="anchor" id="a28059be4f864c9f6afaaebb5143b29a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void td_stop_worker_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops the worker thread. </p>

</div>
</div>
<a class="anchor" id="a1c5c954468f58bbd3d83f1ac53fbe58d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool td_swap_sectors </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>logical_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sector_index *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>logical_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sector_index *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function physically swaps the two given sectors. </p>
<p>This means it reads the data of both sectors, stores sector a in sector b and vice versa and updates the indices </p>

</div>
</div>
<a class="anchor" id="a3d3def15917c648547ea4e4ab3394317"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_write_all_indices </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes all the sector indices to the device. </p>

</div>
</div>
<a class="anchor" id="a3bf9aa5806e550a172fad50351f00d43"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int td_write_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tdisk_header *&#160;</td>
          <td class="paramname"><em>header</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes the td header to the given device and measures the disk performance if perf != NULL. </p>

</div>
</div>
<a class="anchor" id="a97861b5c4ef4f2807d29ef1f1c74fe64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td_write_index_to_disk </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>logical_sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_8h.html#affd8cffebb9bfeaab075a6d080bbc085">tdisk_index</a>&#160;</td>
          <td class="paramname"><em>disk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the given sector index to the given internal device. </p>

</div>
</div>
<a class="anchor" id="a065827e59437fce3cdf0603d56e5c3a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td_write_index_to_disk_async </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sector_t&#160;</td>
          <td class="paramname"><em>logical_sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_8h.html#affd8cffebb9bfeaab075a6d080bbc085">tdisk_index</a>&#160;</td>
          <td class="paramname"><em>disk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>private_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *, long)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the given sector index to the given internal device aysnchronously. </p>

</div>
</div>
<a class="anchor" id="ac5a1a034d21544116d4c09c993462376"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tdisk_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> **&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>blocksize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function creates a new tDisk with the given minor number, and blocksize. </p>
<p>Adds a tDisk with the given minronumber and blocksize to the system. </p>

</div>
</div>
<a class="anchor" id="af7e8ffe75328d489db81c216caa8fc21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __exit tdisk_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is the exit function for the tDisk driver. </p>
<p>It cleans up all remaining tDisks, unregisters the major number and unregisters the control device "td-control" </p>

</div>
</div>
<a class="anchor" id="a3fa9045f35e110b774aefdeae02490cb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tdisk_exit_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This callback function is called for each tDisk at driver exit time to clean up all remaining devices. </p>

</div>
</div>
<a class="anchor" id="a318b6ad0da3f9469036fa9d493cf556e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tdisk_find_free_device_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is used to find the next free minor number in the idr. </p>

</div>
</div>
<a class="anchor" id="a11577c3ce164dc2e8c8b34ee0948a0fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __init tdisk_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This funtction is the main entry point of the driver. </p>
<p>It registers the major number and the control "td-control" device </p>

</div>
</div>
<a class="anchor" id="a78c187c25686e89762a64ab261230582"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tdisk_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> **&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns the tDisk for the given minor number. </p>
<p>Finds the tDisk with the given minornumber.</p>
<p>If the given minor number is &lt; 0, the minor number of an unbound tDisk is returned or -ENODEV if there is no unbound tDisk </p>

</div>
</div>
<a class="anchor" id="acd5e2f82be480bdbf9f7495bc9263ca9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tdisk_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtdisk">tdisk</a> *&#160;</td>
          <td class="paramname"><em>td</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called to remove a tDisk. </p>
<p>Removes the given tDisk from the system.</p>
<p>this frees all the resources </p>

</div>
</div>
<a class="anchor" id="a29930d5031aca4da37a5d1bf41a7e55f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int write_bio_vec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct bio_vec *&#160;</td>
          <td class="paramname"><em>bvec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that writes a bio_vec to a device. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<a class="anchor" id="a127ecafc977eb70f6aee698eac1d4332"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void write_bio_vec_async </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct bio_vec *&#160;</td>
          <td class="paramname"><em>bvec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>private_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *, long)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that writes a bio_vec to a device. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<a class="anchor" id="a7416ee55b81815dc405f452977f280f1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int write_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that writes data to a device. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<a class="anchor" id="ad0f4e8c574f4a5e59ee4dba8f7d561dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void write_data_async </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="tdisk_8h.html#structtd__internal__device">td_internal_device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>private_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *, long)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic function that writes data to a device. </p>
<p>The device can be a file or a plugin. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ac3d1798b9cf3045b991c2731a2008a57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct block_device_operations td_fops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    .owner =    THIS_MODULE,</div><div class="line">    .open =     <a class="code" href="tdisk_8c.html#a4d2aad48720f719c7d748a78e6b23280">td_open</a>,</div><div class="line">    .release =  <a class="code" href="tdisk_8c.html#a3e5539a1a5601e4fe32720bdf1ace7fc">td_release</a>,</div><div class="line">    .ioctl =    <a class="code" href="tdisk_8c.html#a503596ed44bb46b9b677cdcee315af2b">td_ioctl</a>,</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">}</div><div class="ttc" id="tdisk_8c_html_a4d2aad48720f719c7d748a78e6b23280"><div class="ttname"><a href="tdisk_8c.html#a4d2aad48720f719c7d748a78e6b23280">td_open</a></div><div class="ttdeci">static int td_open(struct block_device *bdev, fmode_t mode)</div><div class="ttdoc">This function is called by the kernel whenever it it needs the device. </div><div class="ttdef"><b>Definition:</b> tdisk.c:2647</div></div>
<div class="ttc" id="tdisk_8c_html_a3e5539a1a5601e4fe32720bdf1ace7fc"><div class="ttname"><a href="tdisk_8c.html#a3e5539a1a5601e4fe32720bdf1ace7fc">td_release</a></div><div class="ttdeci">static void td_release(struct gendisk *disk, fmode_t mode)</div><div class="ttdoc">This function is called by the kernel whenever it doesn&amp;#39;t need the device anymore. </div><div class="ttdef"><b>Definition:</b> tdisk.c:2663</div></div>
<div class="ttc" id="tdisk_8c_html_a503596ed44bb46b9b677cdcee315af2b"><div class="ttname"><a href="tdisk_8c.html#a503596ed44bb46b9b677cdcee315af2b">td_ioctl</a></div><div class="ttdeci">static int td_ioctl(struct block_device *bdev, fmode_t mode, unsigned int cmd, unsigned long arg)</div><div class="ttdoc">This function handles all ioctl coming from userspace. </div><div class="ttdef"><b>Definition:</b> tdisk.c:2580</div></div>
</div><!-- fragment -->
<p>The block device operations which are presented to the kernel. </p>

</div>
</div>
<a class="anchor" id="a3ab416cb2b57e1ce4580511e115898e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int TD_MAJOR = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6a43f0b91f8791d051f93a01c1c1d06c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct blk_mq_ops tdisk_mq_ops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    .queue_rq       = <a class="code" href="tdisk_8c.html#acacec26fa7ba78bdd565596ffcd44701">td_queue_rq</a>,</div><div class="line">    .map_queue      = blk_mq_map_queue,</div><div class="line">    .init_request   = <a class="code" href="tdisk_8c.html#ab5ab4b6ac9f074e0fdc8ca2ca5125a0c">td_init_request</a>,</div><div class="line">}</div><div class="ttc" id="tdisk_8c_html_ab5ab4b6ac9f074e0fdc8ca2ca5125a0c"><div class="ttname"><a href="tdisk_8c.html#ab5ab4b6ac9f074e0fdc8ca2ca5125a0c">td_init_request</a></div><div class="ttdeci">static int td_init_request(void *data, struct request *rq, unsigned int hctx_idx, unsigned int request_idx, unsigned int numa_node)</div><div class="ttdoc">This function is called for every request before it is given to the workr thread. ...</div><div class="ttdef"><b>Definition:</b> tdisk.c:2720</div></div>
<div class="ttc" id="tdisk_8c_html_acacec26fa7ba78bdd565596ffcd44701"><div class="ttname"><a href="tdisk_8c.html#acacec26fa7ba78bdd565596ffcd44701">td_queue_rq</a></div><div class="ttdeci">static int td_queue_rq(struct blk_mq_hw_ctx *hctx, const struct blk_mq_queue_data *bd)</div><div class="ttdoc">This function is called by the kernel for each request it reqeives. </div><div class="ttdef"><b>Definition:</b> tdisk.c:2736</div></div>
</div><!-- fragment -->
<p>This struct defines the functions to dispatch requests. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 7 2016 17:20:36 for tDisk kernel module by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
